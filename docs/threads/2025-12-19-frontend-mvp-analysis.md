# 2025-12-19 프론트엔드 MVP 분석 스레드

## [분석] 문서 검토 완료
- 검토 일자: 2025-12-19
- 검토 문서:
  - [career_map_story_board.md](../career_map_story_board.md)
  - [career_map_plan_doc.md](../career_map_plan_doc.md)
  - [career_map_erd.md](../career_map_erd.md)
  - [PM Thread](./2025-12-19-careermap-pm.md)

### 현재 프로젝트 상태
- Flutter 프로젝트 초기 세팅만 완료
- 소스 코드 미작성 상태
- API 명세 및 ERD 정의 완료
- Storyboard 상세 정의 완료

---

## [분석] MVP 화면별 상태 및 UX 흐름 정리

### 1. 온보딩/인증 플로우

#### 1.1 스플래시 / 세션 체크
**상태 관리**
- `로딩`: 토큰 검증 중
- `성공`: 자동 홈 이동
- `실패`: 로그인 화면 이동

**에러 처리**
- 토큰 갱신 실패 → 로그인 화면 + 토스트 "다시 로그인해주세요"

**API 연동**
- `POST /auth/refresh` (토큰 갱신)

---

#### 1.2 로그인
**상태 관리**
- `초기`: 입력 대기
- `로딩`: 로그인 요청 중 (버튼 비활성화)
- `성공`: 홈 화면 이동
- `에러`: 에러 메시지 표시

**유효성 검증 (클라이언트)**
- 이메일 형식 검증 → "이메일 형식이 올바르지 않아요"
- 비밀번호 빈 값 → "비밀번호를 입력해주세요"

**에러 메시지 (서버 응답)**
- 계정 없음 → "등록되지 않은 이메일이에요"
- 비밀번호 불일치 → "비밀번호가 올바르지 않아요"
- 잠금 정책 → "5회 실패로 10분간 잠금되었습니다"

**API 연동**
- `POST /auth/login`

---

#### 1.3 회원가입
**상태 관리**
- `초기`: 입력 대기
- `닉네임 중복 체크 중`: 로딩 표시
- `가입 중`: 전체 로딩
- `성공`: 온보딩 폼으로 이동
- `에러`: 필드별 에러 메시지

**유효성 검증**
- 이메일 형식 검증
- 비밀번호 정책: 8자 이상
- 비밀번호 확인 일치 여부
- 닉네임 중복 체크 (실시간)
- 약관 동의 필수 체크

**API 연동**
- `POST /auth/signup`
- (추가 필요) 닉네임 중복 체크 API

---

#### 1.4 비밀번호 재설정
**상태 관리**
- `초기`: 이메일 입력 대기
- `전송 중`: 로딩
- `성공`: "이메일을 확인해주세요" 메시지
- `실패`: "해당 이메일로 가입된 계정이 없어요"

**API 연동**
- `POST /auth/password/reset/request`

---

#### 1.5 첫 이력 설정 (온보딩 폼)
**상태 관리**
- `단계별 진행`: Step 1/2/3 표시
- `로딩`: 저장 중
- `성공`: 홈 화면 이동
- `건너뛰기`: 최소 입력 후 건너뛰기 가능

**빈 상태**
- "이력은 나중에 수정할 수 있어요" 안내

**API 연동**
- `PUT /me/profile`
- `PUT /me/skills` (선택)

---

### 2. 홈 (대시보드)

**상태 관리**
- `로딩`: 스켈레톤 UI
- `정상`: 섹션별 데이터 표시
- `빈 상태`: 각 섹션별 빈 상태 안내

**빈 상태 처리**
- 추천 없음: "이력을 더 입력하면 추천이 생성돼요" + [이력 입력]
- 네트워크 없음: "동료를 추가하면 네트워크 예측이 더 정확해져요" + [초대하기]

**섹션 구성**
1. 오늘의 추천 카드
2. 이력 완성도 (progress bar 0-100%)
3. 네트워크 하이라이트
4. 예측 요약

**API 연동**
- `GET /me` (프로필)
- `GET /recommendations?limit=5` (추천 미리보기)
- `GET /predictions/companies?limit=3` (예측 미리보기)

---

### 3. 이력 (내 커리어)

#### 3.1 이력 메인 (요약)
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: 섹션별 카드 표시
- `빈 상태`: "경력을 추가해보세요" + [추가] 버튼

**구성**
- 프로필 요약 (직무/연차/지역/희망조건)
- 경력 타임라인
- 프로젝트 리스트
- 스킬 태그

**API 연동**
- `GET /me`
- `GET /me/experiences`
- `GET /me/projects`
- `GET /me/skills`

---

#### 3.2 경력 추가/편집
**상태 관리**
- `입력 중`: 실시간 유효성 검증
- `저장 중`: 로딩
- `성공`: "저장했어요" 토스트 + 이전 화면
- `에러`: 필드별 에러 표시

**유효성 검증**
- 회사명/포지션 필수
- 종료일 < 시작일 불가
- 재직중 토글 시 종료일 비활성화

**API 연동**
- `POST /me/experiences` (추가)
- `PUT /me/experiences/{id}` (수정)
- `DELETE /me/experiences/{id}` (삭제)

---

#### 3.3 프로젝트 추가/편집
**상태 관리**
- `입력 중`: 유효성 검증
- `저장 중`: 로딩
- `성공`: 토스트 + 이전 화면

**UX 팁**
- "STAR 방식" 템플릿 힌트 제공

**API 연동**
- `POST /me/projects`
- `PUT /me/projects/{id}`
- `DELETE /me/projects/{id}`

---

#### 3.4 스킬 관리
**상태 관리**
- `검색 중`: autocomplete 로딩
- `저장 중`: 전체 로딩
- `성공`: 토스트

**UX**
- 실시간 자동완성 검색
- 추천 태그 표시 (직무 기반)
- 숙련도 선택 (초/중/고)

**API 연동**
- `GET /catalog/skills?q={query}` (자동완성)
- `PUT /me/skills` (전체 교체)

---

### 4. 추천 (다음 직장)

#### 4.1 추천 리스트
**상태 관리**
- `로딩`: 스켈레톤 리스트
- `정상`: 리스트 표시
- `빈 상태`: "조건에 맞는 추천이 없어요" + 필터 초기화/이력 보완 버튼

**필터링**
- 희망 직무 (복수)
- 지역/원격
- 산업
- 회사 규모
- 정렬: 최신순/적합도순

**리스트 아이템**
- 회사명 + 추천 직무
- 적합도 점수 (0-100)
- 한 줄 이유
- 저장(북마크) / 숨김 버튼

**API 연동**
- `GET /recommendations?sort=FIT_DESC&cursor=&filters=...`
- `POST /recommendations/{id}/feedback` (저장/숨김)

---

#### 4.2 추천 상세
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: 상세 정보 표시

**섹션**
1. 요약 (회사/직무/적합도)
2. 추천 이유 (3-5개 bullet)
3. 갭 분석 (부족 스킬 + 추천 액션)
4. 유사 동료 (공개 범위 내)

**API 연동**
- `GET /recommendations/{id}`

---

### 5. 네트워크 (동료)

#### 5.1 네트워크 메인
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: 동료 리스트 (최근 활동순)
- `빈 상태`: "동료를 추가해보세요" + [초대하기]

**동료 카드**
- 닉네임/직무
- 마지막 업데이트
- 현재 회사명/산업 (공개 범위에 따라)

**API 연동**
- `GET /network/friends`

---

#### 5.2 동료 초대
**상태 관리**
- `코드 생성 중`: 로딩
- `정상`: 내 초대 코드 표시
- `요청 중`: 친구 요청 전송
- `성공`: "요청을 보냈어요"

**방식**
- 내 초대 코드 표시 + 복사
- 초대 링크 공유
- 코드 입력 + 연결 요청

**API 연동**
- `POST /network/invites` (코드 생성)
- `POST /network/requests` (요청 보내기)

---

#### 5.3 친구 요청 관리
**상태 관리**
- `로딩`: 요청 목록 로딩
- `정상`: 받은/보낸 요청 목록
- `처리 중`: 수락/거절/취소 중
- `성공`: 목록 업데이트

**API 연동**
- `GET /network/requests?type=INCOMING|OUTGOING`
- `POST /network/requests/{id}/accept`
- `POST /network/requests/{id}/reject`

---

#### 5.4 동료 상세 (프로필/이동)
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: 공개 범위 내 정보 표시
- `비공개`: "이 정보는 친구에게만 공개돼요"

**섹션**
- 프로필 요약
- 함께 일했던 기간/회사
- 이직 타임라인

**API 연동**
- `GET /users/{userId}/profile` (추가 필요)
- `GET /users/{userId}/moves`

---

#### 5.5 내 이직 이벤트 입력
**상태 관리**
- `입력 중`: 유효성 검증
- `저장 중`: 로딩
- `성공`: 토스트 + 목록 업데이트

**필드**
- 이벤트 유형 (이직/승진/팀이동)
- 회사명 (필수)
- 직무 (선택)
- 날짜 (필수)
- 공개 범위 (전체/친구만/비공개)

**API 연동**
- `POST /me/moves`
- `PUT /me/moves/{id}`

---

### 6. 예측 (네트워크 기반)

#### 6.1 예측 메인
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: Top N 회사 표시
- `빈 상태`:
  - 동료 부족: "동료가 3명 이상 연결되면 예측 정확도가 올라가요" + [초대하기]
  - 이직 이벤트 부족: "이직 이벤트를 입력하면 예측이 가능해요" + [내 이벤트 추가]

**섹션**
1. 가능성 높은 회사 Top N
2. "나와 유사한 동료"가 간 회사
3. 추천 경로 (커리어 패스)

**API 연동**
- `GET /predictions/companies`

---

#### 6.2 예측 상세 (회사별)
**상태 관리**
- `로딩`: 스켈레톤
- `정상`: 상세 근거 표시

**섹션**
- 점수 + 등급
- 근거 데이터 (친구 이동 수, 최근성, 유사도)
- 갭 분석 (강화하면 좋을 포인트)

**API 연동**
- `GET /predictions/companies/{companyId}`

---

### 7. 설정

#### 7.1 계정/보안
**기능**
- 이메일 표시 (읽기 전용)
- 비밀번호 변경
- 로그아웃
- 회원 탈퇴 (확인 모달)

**API 연동**
- `POST /auth/password/change` (추가 필요)
- `POST /auth/logout`
- `DELETE /me`

---

#### 7.2 공개 범위 설정
**상태 관리**
- `저장 중`: 로딩
- `성공`: 토스트

**설정 항목**
- 내 프로필 공개 범위
- 이직 이벤트 공개 범위
- 회사명 마스킹 옵션
- 동료에게 보이는 항목 토글

**API 연동**
- `PUT /me/privacy`

---

#### 7.3 알림 설정
**설정 항목**
- 동료 이직 업데이트 알림
- 추천 업데이트 알림

**API 연동**
- `PUT /me/notification-settings` (추가 필요)

---

## [차단 사항] 디자인 자산 미정

### 심각도: 높음
### 발생 일자: 2025-12-19

### 차단 내용
현재 디자인 자산이 제공되지 않아 다음 항목들이 불명확합니다:

1. **컬러 시스템**
   - Primary/Secondary/Accent 색상
   - Success/Warning/Error 색상
   - Background/Surface 색상
   - Text 색상 (Primary/Secondary/Disabled)

2. **타이포그래피**
   - 폰트 패밀리
   - 폰트 크기 스케일
   - 행간/자간
   - 폰트 굵기 (Regular/Medium/Bold)

3. **간격 시스템**
   - Spacing scale (4px, 8px, 16px...)
   - Padding/Margin 규칙

4. **컴포넌트 디자인**
   - 버튼 스타일 (Primary/Secondary/Text)
   - Input 필드 스타일
   - Card 디자인
   - 하단 탭 바 디자인
   - 상단 앱바 디자인

5. **아이콘**
   - 아이콘 세트 (Material Icons? Custom?)
   - 탭 아이콘
   - 액션 아이콘

### 영향 범위
- UI 컴포넌트 개발 시작 불가
- 테마 설정 불가
- 일관된 디자인 시스템 구축 불가

### 대응 방안
다음 중 하나를 선택해야 합니다:

**옵션 1: 디자인 가이드 대기** (권장)
- PM/디자이너에게 디자인 가이드 요청
- Figma 링크 또는 디자인 토큰 제공 요청

**옵션 2: 임시 디자인 시스템 구축**
- Material Design 3 기본값 사용
- 추후 디자인 가이드 제공 시 전면 수정 필요

### 요청 사항
PM에게 다음 정보 제공 요청:
- [ ] Figma 디자인 파일 링크
- [ ] 디자인 토큰 (색상/폰트/간격)
- [ ] UI 컴포넌트 라이브러리 가이드
- [ ] 브랜드 가이드라인

---

## [차단 사항] API 명세 불명확 부분

### 심각도: 중간
### 발생 일자: 2025-12-19

### 누락된 API 엔드포인트

#### 1. 닉네임 중복 체크
**필요한 API**
```
GET /auth/check-nickname?nickname={nickname}
Response: { "available": boolean }
```

**사용 화면**: 회원가입

---

#### 2. 비밀번호 변경
**필요한 API**
```
POST /auth/password/change
Request: { "currentPassword": "...", "newPassword": "..." }
Response: { "ok": true }
```

**사용 화면**: 설정 > 계정/보안

---

#### 3. 알림 설정
**필요한 API**
```
GET /me/notification-settings
PUT /me/notification-settings
Request: { "friendMoves": boolean, "recommendations": boolean }
```

**사용 화면**: 설정 > 알림 설정

---

#### 4. 동료 프로필 조회
**필요한 API**
```
GET /users/{userId}/profile
Response: { 공개 범위 내 프로필 정보 }
```

**사용 화면**: 네트워크 > 동료 상세

---

#### 5. 추천/예측 재계산 트리거
**현재 ERD**: `POST /predictions/recompute` (선택 사항으로 명시)

**질문**:
- 서버에서 배치로 자동 갱신하는지?
- 클라이언트에서 수동 트리거 필요한지?

---

### 불명확한 응답 형식

#### 1. 페이지네이션 일관성
**질문**:
- 모든 리스트 API가 cursor 기반인지?
- `nextCursor: null`이 마지막 페이지를 의미하는지?

#### 2. 에러 응답 형식
**ERD에 정의된 형식**:
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "...",
    "fields": [...],
    "traceId": "..."
  }
}
```

**질문**:
- 모든 에러가 이 형식을 따르는지?
- HTTP 상태 코드별 에러 코드 매핑은?

---

### 요청 사항
서버 에이전트에게 다음 확인 요청:
- [ ] 누락된 API 엔드포인트 추가
- [ ] 페이지네이션 정책 명확화
- [ ] 에러 응답 형식 표준화

---

## [계획] 테스트 전략

### 테스트 환경

#### 1. 지원 플랫폼
**가정** (PM 확인 필요):
- Android: 최소 SDK 21 (Android 5.0)
- iOS: 최소 iOS 13.0

#### 2. 테스트 기기
**Android**:
- Galaxy S21 (Android 13) - 높은 해상도
- Galaxy A52 (Android 12) - 중간 해상도
- Pixel 7 (Android 14) - 최신 버전

**iOS**:
- iPhone 14 Pro (iOS 17) - 최신
- iPhone 12 (iOS 16) - 중간
- iPhone SE 3세대 (iOS 15) - 작은 화면

#### 3. 해상도 테스트
- 360x640 (작은 화면)
- 375x812 (iPhone 표준)
- 390x844 (iPhone 14)
- 412x915 (Android 표준)

---

### 테스트 범위

#### 1. 단위 테스트 (Unit Test)
- **범위**: 비즈니스 로직, 유틸리티 함수
- **도구**: `flutter_test`
- **목표**: 70% 이상 커버리지

**우선순위 높은 영역**:
- 유효성 검증 로직 (이메일, 비밀번호, 날짜)
- 데이터 변환 로직
- 상태 관리 로직

---

#### 2. 위젯 테스트 (Widget Test)
- **범위**: UI 컴포넌트, 화면
- **도구**: `flutter_test`
- **목표**: 주요 화면 100% 커버

**우선순위 높은 화면**:
- 로그인/회원가입
- 이력 입력 폼
- 추천 리스트/상세

---

#### 3. 통합 테스트 (Integration Test)
- **범위**: 핵심 사용자 플로우
- **도구**: `integration_test`

**주요 시나리오**:
1. 회원가입 → 온보딩 → 홈
2. 로그인 → 이력 추가 → 추천 조회
3. 동료 초대 → 요청 수락 → 예측 조회

---

#### 4. API 통합 테스트
- **범위**: 실제 API 연동
- **도구**: Mock 서버 또는 개발 서버

**테스트 항목**:
- 정상 응답 처리
- 에러 응답 처리
- 네트워크 타임아웃
- 토큰 갱신 플로우

---

### 성능 테스트

#### 1. 로딩 성능
- 화면 전환 시간 < 300ms
- API 응답 대기 중 스켈레톤 UI 표시
- 이미지 로딩 지연 처리

#### 2. 메모리 사용량
- 메모리 누수 확인
- 큰 리스트 스크롤 성능

#### 3. 배터리 소모
- 백그라운드 작업 최소화

---

### 접근성 테스트

#### 1. 화면 읽기 (Screen Reader)
- TalkBack (Android)
- VoiceOver (iOS)

#### 2. 색상 대비
- WCAG AA 기준 준수

#### 3. 터치 타겟
- 최소 44x44 pt

---

### CI/CD 통합

#### 1. 자동화 테스트
- PR 생성 시 자동 테스트 실행
- 테스트 실패 시 머지 차단

#### 2. 코드 품질
- Linter 규칙 준수
- 정적 분석 (flutter analyze)

---

## [다음 단계] 후속 작업

### 차단 해제 필요
1. **PM에게 요청**
   - [ ] 디자인 가이드 제공
   - [ ] 테스트 환경 정책 확인 (지원 OS 버전)
   - [ ] 1차 마일스톤 일정 확인

2. **서버 에이전트에게 요청**
   - [ ] 누락된 API 엔드포인트 추가
   - [ ] API 응답 형식 명확화

### 차단 해제 후 작업
1. **프로젝트 초기 설정**
   - Clean Architecture 폴더 구조 생성
   - 의존성 주입 설정 (get_it, injectable)
   - 라우팅 설정 (go_router)
   - 상태 관리 설정 (hooks_riverpod)
   - API 클라이언트 설정 (dio, retrofit)

2. **공통 컴포넌트 개발**
   - 테마 설정 (디자인 가이드 기반)
   - 공통 UI 컴포넌트
   - 에러 처리 위젯
   - 로딩 인디케이터

3. **화면 개발 우선순위**
   - Phase 1: 인증 (로그인/회원가입/온보딩)
   - Phase 2: 이력 입력
   - Phase 3: 추천/네트워크/예측

---

## [요약] 작업 현황

### ✅ 완료
- docs 서브모듈 최신화
- storyboard/plan/erd 문서 검토
- MVP 화면별 상태 및 UX 흐름 분석
- 차단 사항 식별
- 테스트 계획 수립

### ⏸️ 차단됨
- 디자인 가이드 미제공
- 일부 API 엔드포인트 누락
- 테스트 환경 정책 미정

### 🔜 대기 중
- PM의 디자인 가이드 및 정책 제공
- 서버 에이전트의 API 명세 보완
- task-brief 발행

